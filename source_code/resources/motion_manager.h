//--------------------------------------------------------------------------------
//　motion_manager.h
//  manage the motion datas' save, load
//  モーション管理者
//  Author : 徐文杰(KodFreedom)
//--------------------------------------------------------------------------------
#pragma once
#include "resource_manager.h"

//--------------------------------------------------------------------------------
//  前方宣言
//--------------------------------------------------------------------------------
class MotionData;

//--------------------------------------------------------------------------------
//  モーションマネージャクラス
//--------------------------------------------------------------------------------
class MotionManager final : public ResourceManager
{
public:
    //--------------------------------------------------------------------------------
    //  生成処理
    //  return : MaterialManager*
    //--------------------------------------------------------------------------------
    static MotionManager* Create(void);

    //--------------------------------------------------------------------------------
    //  モーションデータを取得
    //--------------------------------------------------------------------------------
    MotionData* Get(const String& motion_name);

private:
    //--------------------------------------------------------------------------------
    //  構造体定義
    //--------------------------------------------------------------------------------
    struct MotionInfo
    {
        MotionInfo() : user_number(1), pointer(nullptr) {}
        int            user_number;
        MotionData*    pointer;
    };

    //--------------------------------------------------------------------------------
    //  constructors and destructors
    //--------------------------------------------------------------------------------
    MotionManager() {}
    MotionManager(const MotionManager& value) {}
    MotionManager& operator=(const MotionManager& value) {}
    ~MotionManager() {}

    //--------------------------------------------------------------------------------
    //  終了処理
    //--------------------------------------------------------------------------------
    void Uninit(void) override;

    //--------------------------------------------------------------------------------
    //  リソースの読込処理
    //--------------------------------------------------------------------------------
    void LoadResource(void) override;

    //--------------------------------------------------------------------------------
    //  リソースのリリース処理
    //--------------------------------------------------------------------------------
    void ReleaseResource(void) override;

    //--------------------------------------------------------------------------------
    //  ファイルから読み込む
    //--------------------------------------------------------------------------------
    MotionData* LoadFromFile(const String& motion_name);

    //--------------------------------------------------------------------------------
    //  変数定義
    //--------------------------------------------------------------------------------
    unordered_map<size_t, MotionInfo> motions_;
};