//--------------------------------------------------------------------------------
//　game_object_manager.h
//  ゲームオブジェクト管理者
//  Author : 徐文杰(KodFreedom)
//--------------------------------------------------------------------------------
#pragma once
#include "../common_setting.h"

//--------------------------------------------------------------------------------
//  列挙型定義
//--------------------------------------------------------------------------------
enum Layer
{
    kDefaultLayer = 0,
    kUnableAutoDelete,
    kLayerMax
};

//--------------------------------------------------------------------------------
//  前方宣言
//--------------------------------------------------------------------------------
class GameObject;

//--------------------------------------------------------------------------------
//  クラス宣言
//--------------------------------------------------------------------------------
class GameObjectManager
{
public:
    //--------------------------------------------------------------------------------
    //  生成処理
    //  return : MaterialManager*
    //--------------------------------------------------------------------------------
    static GameObjectManager* Create(void)
    {
        auto instance = MY_NEW GameObjectManager();
        return instance;
    }

    //--------------------------------------------------------------------------------
    //  破棄処理
    //--------------------------------------------------------------------------------
    void Release(void);

    //--------------------------------------------------------------------------------
    //  クリア処理
    //--------------------------------------------------------------------------------
    void Clear(void);

    //--------------------------------------------------------------------------------
    //  更新処理
    //--------------------------------------------------------------------------------
    void Update(void);

    //--------------------------------------------------------------------------------
    //  後更新処理
    //--------------------------------------------------------------------------------
    void LateUpdate(void);

    //--------------------------------------------------------------------------------
    //  登録処理
    //--------------------------------------------------------------------------------
    void Register(GameObject* game_object, const Layer& layer = kDefaultLayer)
    {
        game_objects_array_[layer].push_back(game_object);
    }

private:
    //--------------------------------------------------------------------------------
    //  constructors and destructors
    //--------------------------------------------------------------------------------
    GameObjectManager() {}
    GameObjectManager(const GameObjectManager& value) {}
    GameObjectManager& operator=(const GameObjectManager& value) {}
    ~GameObjectManager() {}

    //--------------------------------------------------------------------------------
    //  変数定義
    //--------------------------------------------------------------------------------
    list<GameObject*> game_objects_array_[kLayerMax];
};