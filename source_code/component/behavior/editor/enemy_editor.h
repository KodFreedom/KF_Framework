//--------------------------------------------------------------------------------
//  エネミーエディタ
//　enemy_editor.h
//  Author : Xu Wenjie
//--------------------------------------------------------------------------------
#pragma once
#include "editor.h"
#if defined(EDITOR)
#include "../actor/actor_parameter.h"

//--------------------------------------------------------------------------------
//  前方宣言
//--------------------------------------------------------------------------------
class Transform;

//--------------------------------------------------------------------------------
//  クラス宣言
//--------------------------------------------------------------------------------
class EnemyEditor : public Editor
{
public:
    //--------------------------------------------------------------------------------
    //  constructors and destructors
    //--------------------------------------------------------------------------------
    EnemyEditor(GameObject& owner);
    ~EnemyEditor() {}

    //--------------------------------------------------------------------------------
    //  初期化
    //--------------------------------------------------------------------------------
    bool Init(void) override;

    //--------------------------------------------------------------------------------
    //  終了処理
    //--------------------------------------------------------------------------------
    void Uninit(void) override;

    //--------------------------------------------------------------------------------
    //  更新処理
    //--------------------------------------------------------------------------------
    void Update(void) override;

    //--------------------------------------------------------------------------------
    //  アクティブフラグ関数
    //--------------------------------------------------------------------------------
    void SetActive(const bool& value) override;

    //--------------------------------------------------------------------------------
    //  位置の設定
    //--------------------------------------------------------------------------------
    void SetPosition(const Vector3& position) override;

    //--------------------------------------------------------------------------------
    //  ファイルに保存
    //--------------------------------------------------------------------------------
    void SaveAsBinary(const String& name) override;

    //--------------------------------------------------------------------------------
    //  情報を読込関数
    //--------------------------------------------------------------------------------
    void LoadFrom(const String& name) override;

private:
    //--------------------------------------------------------------------------------
    //  構造体定義
    //--------------------------------------------------------------------------------
    struct EnemyInfo
    {
        EnemyInfo()
            : warning_transform(nullptr)
            , patrol_transform(nullptr) {}
        Transform*      warning_transform;
        Transform*      patrol_transform;
        ActorParameter  parameter;
    };

    //--------------------------------------------------------------------------------
    //  関数定義
    //--------------------------------------------------------------------------------
    void Create(void);
    void ShowMainWindow(void);
    void EditEnemyInfo(EnemyInfo& info);
    void ClearList(void);

    //--------------------------------------------------------------------------------
    //  変数定義
    //--------------------------------------------------------------------------------
    EnemyInfo         current_info_;
    list<EnemyInfo>   created_infos_;
};
#endif // EDITOR