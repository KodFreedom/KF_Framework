//--------------------------------------------------------------------------------
//	コリジョンマネージャ
//　colliderManager.h
//	Author : Xu Wenjie
//	Date   : 2017-06-04
//--------------------------------------------------------------------------------
#pragma once

//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"

//--------------------------------------------------------------------------------
//  前方宣言
//--------------------------------------------------------------------------------
class CColliderComponent;
class CSphereColliderComponent;
class CFieldColliderComponent;

//--------------------------------------------------------------------------------
//  定数定義
//--------------------------------------------------------------------------------
#define CM CColliderManager	//CColliderManagerの略称

//--------------------------------------------------------------------------------
//  クラス宣言
//--------------------------------------------------------------------------------
class CColliderManager
{
public:
	//--------------------------------------------------------------------------------
	//  構造体定義
	//--------------------------------------------------------------------------------
	enum MODE
	{
		STATIC = 0,
		DYNAMIC,
		MODE_MAX
	};

	enum COL_TYPE
	{
		COL_NULL = 0,
		COL_FIELD,
		COL_SPHERE,
		COL_MAX
	};

	typedef std::list<CColliderComponent*>::iterator COL_ITR;

	//--------------------------------------------------------------------------------
	//  関数定義
	//--------------------------------------------------------------------------------
	CColliderManager();
	~CColliderManager() {}

	void		Init(void);
	void		Uninit(void);
	void		Update(void);

	COL_ITR		SaveCollider(const MODE& mode, const COL_TYPE& type, CColliderComponent* pCollider);
	void		ReleaseCollider(const MODE& mode, const COL_TYPE& type, const COL_ITR& itr);

private:
	//--------------------------------------------------------------------------------
	//  関数定義
	//--------------------------------------------------------------------------------
	void		CheckInStatic(const CSphereColliderComponent& sphere);

	//--------------------------------------------------------------------------------
	//  変数定義
	//--------------------------------------------------------------------------------
	std::list<CColliderComponent*> m_alistCollider[MODE_MAX][COL_MAX];
};