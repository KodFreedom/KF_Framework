//--------------------------------------------------------------------------------
//　render_system.h
//	レンダーシステム
//	Author : 徐文杰(KodFreedom)
//--------------------------------------------------------------------------------
#pragma once
#include "main.h"
#include "shader_enum.h"

//--------------------------------------------------------------------------------
//  構造体定義
//--------------------------------------------------------------------------------
struct Vertex2d // 2D頂点情報構造体
{
	Vector3 position;
	Vector2 uv;
};

struct Vertex3d // 3D頂点情報構造体
{
	Vector3 position;
	Vector3 normal;
	Vector2 uv;
};

//--------------------------------------------------------------------------------
//  レンダーシステムクラス
//--------------------------------------------------------------------------------
class RenderSystem
{
public:
	//--------------------------------------------------------------------------------
	//  破棄処理
	//--------------------------------------------------------------------------------
	void Release(void) { Uninit(); }

	//--------------------------------------------------------------------------------
	//  背景色の取得
	//--------------------------------------------------------------------------------
	const auto& GetBackgroundColor(void) const { return background_color_; }

	//--------------------------------------------------------------------------------
	//  フォグ色の取得
	//--------------------------------------------------------------------------------
	const auto& GetFogColor(void) const { return fog_color_; }

	//--------------------------------------------------------------------------------
	//  背景色の設定
	//--------------------------------------------------------------------------------
	void SetBackgroundColor(const Color& color) { background_color_ = color; }

	//--------------------------------------------------------------------------------
	//  フォグ色の設定
	//--------------------------------------------------------------------------------
	void SetFogColor(const Color& color) { fog_color_ = color; }

	//--------------------------------------------------------------------------------
	//  描画開始
	//--------------------------------------------------------------------------------
	virtual bool BeginRender(void) = 0;

	//--------------------------------------------------------------------------------
	//  描画終了
	//--------------------------------------------------------------------------------
	virtual void EndRender(void) = 0;

	//--------------------------------------------------------------------------------
	//  swap backbuffer / バックバッファの切り替え
	//--------------------------------------------------------------------------------
	virtual void Present(void) = 0;

	//--------------------------------------------------------------------------------
	//  描画処理(3D)
	//	mesh_name：メッシュ名前
	//--------------------------------------------------------------------------------
	virtual void Render(const string& mesh_name) = 0;

	//--------------------------------------------------------------------------------
	//  カリングモードの設定
	//--------------------------------------------------------------------------------
	virtual void SetRenderState(const CullMode& value) = 0;

	//--------------------------------------------------------------------------------
	//  フィルモードの設定
	//--------------------------------------------------------------------------------
	virtual void SetRenderState(const FillMode& value) = 0;

	//--------------------------------------------------------------------------------
	//  フォグモードの設定
	//--------------------------------------------------------------------------------
	virtual void SetRenderState(const FogMode& value) = 0;

	//--------------------------------------------------------------------------------
	//  αモードの設定
	//--------------------------------------------------------------------------------
	virtual void SetRenderState(const AlphaMode& value) = 0;

protected:
	//--------------------------------------------------------------------------------
	//  constructors and destructors
	//--------------------------------------------------------------------------------
	RenderSystem()
		: background_color_(Color::kBlack), fog_color_(Color::kWhite)
		, fog_start_z_(100.0f), fog_end_z_(1000.0f), fog_density_(0.01f) {}
	RenderSystem(const RenderSystem& value) {}
	RenderSystem& operator=(const RenderSystem& value) {}
	~RenderSystem() {}

	//--------------------------------------------------------------------------------
	//  終了処理
	//--------------------------------------------------------------------------------
	virtual void Uninit(void) = 0;

	//--------------------------------------------------------------------------------
	//  変数定義
	//--------------------------------------------------------------------------------
	Color background_color_; // 背景色
	Color fog_color_; // フォグの色
	float fog_start_z_; // フォグ開始範囲
	float fog_end_z_; // フォグ終了範囲
	float fog_density_; // フォグの濃さ
};