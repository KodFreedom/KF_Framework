//--------------------------------------------------------------------------------
//
//　UISystem.cpp
//	Author : Xu Wenjie
//	Date   : 2017-07-17
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"
#include "UISystem.h"
#include "UIObject.h"

//--------------------------------------------------------------------------------
//  クラス
//--------------------------------------------------------------------------------


//--------------------------------------------------------------------------------
//  更新
//--------------------------------------------------------------------------------
void CUISystem::UpdateAll(void)
{
	for (auto itr = m_listObj.begin(); itr != m_listObj.end(); ++itr)
	{
		(*itr)->Update();
	}
}

//--------------------------------------------------------------------------------
//  描画
//--------------------------------------------------------------------------------
void CUISystem::DrawAll(void)
{
	for (auto itr = m_listObj.begin(); itr != m_listObj.end(); ++itr)
	{
		(*itr)->Draw();
	}
}

//--------------------------------------------------------------------------------
//  追加
//--------------------------------------------------------------------------------
void CUISystem::Register(CUIObject* pUIObj)
{
	m_listObj.push_back(pUIObj);
	m_listObj.sort(CUISystem::Compare);		//描画順番をソートする
}

//--------------------------------------------------------------------------------
//  削除
//--------------------------------------------------------------------------------
void CUISystem::Deregister(CUIObject* pUIObj)
{
	m_listObj.remove(pUIObj);
}

//--------------------------------------------------------------------------------
//  比較関数
//--------------------------------------------------------------------------------
bool CUISystem::Compare(CUIObject* pUIObjA, CUIObject* pUIObjB)
{
	return pUIObjA->m_usOrder < pUIObjB->m_usOrder;
}

//--------------------------------------------------------------------------------
//  リリース
//--------------------------------------------------------------------------------
void CUISystem::ReleaseAll(void)
{
	for (auto itr = m_listObj.begin(); itr != m_listObj.end();)
	{
		(*itr)->Uninit();
		delete (*itr);
		itr = m_listObj.erase(itr);
	}
}