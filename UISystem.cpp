//--------------------------------------------------------------------------------
//
//　UISystem.cpp
//	Author : Xu Wenjie
//	Date   : 2017-07-17
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"
#include "UISystem.h"
#include "UIObject.h"

//--------------------------------------------------------------------------------
//  静的メンバ変数
//--------------------------------------------------------------------------------
UISystem* UISystem::instance = nullptr;

//--------------------------------------------------------------------------------
//
//  Public
//
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  更新
//--------------------------------------------------------------------------------
void UISystem::Update(void)
{
	for (auto object : objects)
	{
		object->Update();
	}
}

//--------------------------------------------------------------------------------
//  描画
//--------------------------------------------------------------------------------
void UISystem::Draw(void)
{
	for (auto object : objects)
	{
		object->Draw();
	}
}

//--------------------------------------------------------------------------------
//  追加
//--------------------------------------------------------------------------------
void UISystem::Register(UIObject* object)
{
	objects.push_back(object);
	objects.sort(UISystem::compare);
}

//--------------------------------------------------------------------------------
//  削除
//--------------------------------------------------------------------------------
void UISystem::Deregister(UIObject* object)
{
	objects.remove(object);
}

//--------------------------------------------------------------------------------
//  リリース
//--------------------------------------------------------------------------------
void UISystem::ReleaseAll(void)
{
	for (auto itr = objects.begin(); itr != objects.end();)
	{
		(*itr)->Uninit();
		delete (*itr);
		itr = objects.erase(itr);
	}
}

//--------------------------------------------------------------------------------
//
//  Private
//
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  比較関数
//--------------------------------------------------------------------------------
bool UISystem::compare(UIObject* objectA, UIObject* objectB)
{
	return objectA->order < objectB->order;
}

