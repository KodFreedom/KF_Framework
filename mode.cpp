//--------------------------------------------------------------------------------
//
//　mode.cpp
//	Author : Xu Wenjie
//	Date   : 2017-04-28
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"
#include "mode.h"
#include "camera.h"
#include "manager.h"
#include "gameObjectManager.h"
#include "physicsSystem.h"
#include "UISystem.h"
#include "renderManager.h"

//--------------------------------------------------------------------------------
//  クラス
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//
//  Pubic
//
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  コンストラクタ
//--------------------------------------------------------------------------------
CMode::CMode()
{
	static CNullCamera nullCamera;
	m_pCamera = &nullCamera;
}

//--------------------------------------------------------------------------------
//  更新処理
//--------------------------------------------------------------------------------
void CMode::Update(void)
{
	//カメラの更新
	m_pCamera->Update();
}

//--------------------------------------------------------------------------------
//  更新処理(描画直前)
//--------------------------------------------------------------------------------
void CMode::LateUpdate(void)
{
	//カメラの更新
	m_pCamera->LateUpdate();
}

//--------------------------------------------------------------------------------
//  カメラの設定
//--------------------------------------------------------------------------------
void CMode::CameraSet(void)
{
	m_pCamera->Set();
}

//--------------------------------------------------------------------------------
//
//  Private
//
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  終了処理
//--------------------------------------------------------------------------------
void CMode::uninit(void)
{
	//カメラの破棄
	SAFE_RELEASE(m_pCamera);

	auto pManager = Main::GetManager();
	pManager->GetPhysicsSystem()->Clear();
	pManager->GetGameObjectManager()->ReleaseAll();
	pManager->GetUISystem()->ReleaseAll();
	pManager->GetRenderManager()->Clear();
}