//--------------------------------------------------------------------------------
//
//　fade.h
//	Author : Xu Wenjie
//	Date   : 2017-06-09
//--------------------------------------------------------------------------------
#pragma once

//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"

//--------------------------------------------------------------------------------
//  前方宣言
//--------------------------------------------------------------------------------
class CMode;

//--------------------------------------------------------------------------------
//  クラス宣言
//--------------------------------------------------------------------------------
class CFade
{
public:
	//--------------------------------------------------------------------------------
	//  関数定義
	//--------------------------------------------------------------------------------
	CFade()
		: m_fade(FADE_IN)
		, m_pModeNext(NULL)
		, m_cColor(CKFColor(0.0f, 0.0f, 0.0f, 1.0f))
		, m_nCnt(0)
#ifdef USING_DIRECTX
		, m_pVtxBuffer(NULL)
#endif
	{}

	~CFade() {}

	void	Init(void);
	void	Uninit(void);
	void	Update(void);
	void	Draw(void);
	void	Release(void)
	{
		Uninit();
		delete this;
	}

	void	FadeToMode(CMode* pModeNext);

	static CFade *Create(void);
private:
	//--------------------------------------------------------------------------------
	//  列挙型定義
	//--------------------------------------------------------------------------------
	enum FADE
	{//フェイドの状態
		FADE_NONE = 0,
		FADE_IN,
		FADE_OUT,
		FADE_MAX
	};

	//--------------------------------------------------------------------------------
	//  定数定義
	//--------------------------------------------------------------------------------
	static const float sc_fFadeRate;
	
	//--------------------------------------------------------------------------------
	//  関数定義
	//--------------------------------------------------------------------------------
	void SetColorFade(const CKFColor &cColor);

	//--------------------------------------------------------------------------------
	//  変数定義
	//--------------------------------------------------------------------------------
	CKFColor					m_cColor;
	FADE						m_fade;
	CMode*						m_pModeNext;
	int							m_nCnt;

#ifdef USING_DIRECTX
	LPDIRECT3DVERTEXBUFFER9		m_pVtxBuffer;	//頂点バッファ管理インターフェースポインタ
#endif
};