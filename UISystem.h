//--------------------------------------------------------------------------------
//
//　UISystem.h
//	Author : Xu Wenjie
//	Date   : 2017-07-17
//--------------------------------------------------------------------------------
#pragma once

//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"

//--------------------------------------------------------------------------------
//  前方宣言
//--------------------------------------------------------------------------------
class UIObject;

//--------------------------------------------------------------------------------
//  クラス
//--------------------------------------------------------------------------------
class UISystem
{
public:
	//--------------------------------------------------------------------------------
	//  関数宣言
	//-------------------------------------------------------------------------------
	static auto	Create(void)
	{
		if (instance) return instance;
		instance = new UISystem;
		return instance;
	}
	static void Release(void) { SAFE_UNINIT(instance); }
	static auto Instance(void) { return instance; }
	
	void ReleaseAll(void);
	void Update(void);
	void Draw(void);
	void Register(UIObject* object);
	void Deregister(UIObject* object);

private:
	//--------------------------------------------------------------------------------
	//  関数宣言
	//--------------------------------------------------------------------------------
	UISystem() { objects.clear(); }
	~UISystem() {}
	void		uninit(void) { ReleaseAll(); }
	static bool	compare(UIObject* objectA, UIObject* objectB);

	//--------------------------------------------------------------------------------
	//  変数定義
	//--------------------------------------------------------------------------------
	list<UIObject*>  objects;
	static UISystem* instance;
};