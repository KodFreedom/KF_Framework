//--------------------------------------------------------------------------------
//　ui_system.cpp
//	UIシステム
//	Author : 徐文杰(KodFreedom)
//--------------------------------------------------------------------------------
#include "ui_system.h"
#include "ui_object.h"

//--------------------------------------------------------------------------------
//
//  Public
//
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  更新
//--------------------------------------------------------------------------------
void UISystem::Update(void)
{
	for (auto object : objects_)
	{
		object->Update();
	}
}

//--------------------------------------------------------------------------------
//  描画
//--------------------------------------------------------------------------------
void UISystem::Render(void)
{
	for (auto object : objects_)
	{
		object->Render();
	}
}

//--------------------------------------------------------------------------------
//  追加
//--------------------------------------------------------------------------------
void UISystem::Register(UIObject* object)
{
	objects_.push_back(object);
	objects_.sort(UISystem::Compare);
}

//--------------------------------------------------------------------------------
//  削除
//--------------------------------------------------------------------------------
void UISystem::Deregister(UIObject* object)
{
	objects_.remove(object);
}

//--------------------------------------------------------------------------------
//  リリース
//--------------------------------------------------------------------------------
void UISystem::Clear(void)
{
	for (auto iterator = objects_.begin(); iterator != objects_.end();)
	{
		(*iterator)->Uninit();
		delete (*iterator);
		iterator = objects_.erase(iterator);
	}
}

//--------------------------------------------------------------------------------
//
//  Private
//
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  比較関数
//--------------------------------------------------------------------------------
bool UISystem::Compare(UIObject* object_a, UIObject* object_b)
{
	return object_a->GetOrder() < object_b->GetOrder();
}

