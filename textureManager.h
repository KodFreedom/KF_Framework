//--------------------------------------------------------------------------------
//
//　textureManager.h
//	Author : Xu Wenjie
//	Date   : 2017-1-23
//--------------------------------------------------------------------------------
#pragma once

//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------

//--------------------------------------------------------------------------------
//  定数定義
//--------------------------------------------------------------------------------

//--------------------------------------------------------------------------------
//  クラス宣言
//--------------------------------------------------------------------------------
class CTextureManager
{
public:
	//--------------------------------------------------------------------------------
	//  関数宣言
	//--------------------------------------------------------------------------------
	CTextureManager() { m_umTexture.clear(); }
	~CTextureManager() {}

	void				Release(void) { UnloadAll(); delete this; }
	void				UnloadAll(void);
	void				UseTexture(const string& strName);
	void				DisuseTexture(const string& strName);

#ifdef USING_DIRECTX
	LPDIRECT3DTEXTURE9	GetTexture(const string& strName) 
	{
		if (strName.empty()) { return nullptr; }
		return m_umTexture.at(strName).pTexture; 
	}
#endif

private:
	//--------------------------------------------------------------------------------
	//  構造体定義
	//--------------------------------------------------------------------------------
	struct TEXTURE
	{
		unsigned short		usNumUsers;	//今使ってるオブジェクト数
#ifdef USING_DIRECTX
		LPDIRECT3DTEXTURE9	pTexture;	//テクスチャ
#endif
	};

	//--------------------------------------------------------------------------------
	//  変数定義
	//--------------------------------------------------------------------------------
	unordered_map<string, TEXTURE> m_umTexture;
};