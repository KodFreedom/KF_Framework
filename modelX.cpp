//--------------------------------------------------------------------------------
//
//	XFileモデル
//　modelX.cpp
//	Author : Xu Wenjie
//	
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//  インクルードファイル
//--------------------------------------------------------------------------------
#include "main.h"
#include "manager.h"
#include "rendererDX.h"
#include "modelX.h"

//--------------------------------------------------------------------------------
//  コンストラクタ
//--------------------------------------------------------------------------------
CModelX::CModelX() : CModel()
{
	m_XFileInfo.pMesh = NULL;
	m_XFileInfo.pBufferMaterial = NULL;
	m_XFileInfo.dwNumMaterial = 0;
	m_XFileInfo.vectorTexture.clear();
}

//--------------------------------------------------------------------------------
//  初期化
//--------------------------------------------------------------------------------
KFRESULT CModelX::Init(const LPCSTR &pXFilePath)
{
	KFRESULT result = LoadXFile(&m_XFileInfo, pXFilePath);
	return result;
}

//--------------------------------------------------------------------------------
//  終了処理
//--------------------------------------------------------------------------------
void CModelX::Uninit(void)
{
	ReleaseXFile(&m_XFileInfo);
}

//--------------------------------------------------------------------------------
//  描画処理
//--------------------------------------------------------------------------------
void CModelX::Draw(void)
{
	DrawXFile(m_XFileInfo);
}

//--------------------------------------------------------------------------------
//  描画処理(マテリアル指定)
//--------------------------------------------------------------------------------
void CModelX::Draw(const CMM::MATERIAL &matType)
{
	DrawXFile(m_XFileInfo, matType);
}

//--------------------------------------------------------------------------------
//  作成
//--------------------------------------------------------------------------------
CModelX *CModelX::Create(const LPCSTR &pXFilePath)
{
	CModelX *pModelX = NULL;
	pModelX = new CModelX;
	pModelX->Init(pXFilePath);
	pModelX->m_modelType = CMOM::XFILE;
	return pModelX;
}
